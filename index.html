<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Theme & Language Flash Prevention - MUST be first to prevent FOUC -->
    <script>
      (function () {
        try {
          var stored = localStorage.getItem("catchpoint-settings");
          var settings = stored ? JSON.parse(stored) : {};
          var state = settings.state || {};

          // Theme resolution - only set attribute for dark mode (matches useTheme.ts)
          var themePref = state.theme || "system";
          var isDark =
            themePref === "dark" ||
            (themePref === "system" &&
              window.matchMedia("(prefers-color-scheme: dark)").matches);
          if (isDark) {
            document.documentElement.setAttribute("data-theme", "dark");
          }

          // Language resolution (for future i18n)
          var lang = state.language || "system";
          if (lang === "system") {
            lang = (navigator.language || "en").split("-")[0];
            if (lang !== "fr") lang = "en";
          }
          document.documentElement.lang = lang;
        } catch (e) {}
      })();
    </script>
    <link rel="icon" type="image/svg+xml" href="/icons/icon.svg" />
    <!-- Viewport with iOS safe area support -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="description" content="Offline-first fishing log PWA" />
    <meta name="theme-color" content="#0f3460" />

    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Catchpoint" />

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-180x180.png" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/icons/apple-touch-icon-180x180.png"
    />

    <title>Catchpoint</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
